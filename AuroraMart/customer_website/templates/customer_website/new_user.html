<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuroraMart - Complete Your Profile</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'customer_website/css/new_user.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="{% static 'customer_website/script/new_user.js' %}"></script>
</head>

<body>
    <main class="new-user-container">
        <div class="logo-header">
            {% load static %}
            <img src="{% static 'customer_website/Logo.png' %}" alt="AuroraMart Logo" class="logo-img">
        </div>

        {% if is_profile_update %}
            <h1 class="welcome-title">Update Your Profile</h1>
            <h2 class="welcome-subtitle">Help us personalize your shopping experience even better</h2>
        {% else %}
            <h1 class="welcome-title">Before you begin...</h1>
            <h2 class="welcome-subtitle">Let's get some more details to personalize your experience</h2>
        {% endif %}

        <form method="post" class="login-form">
            {% csrf_token %}
            
            {{ form.username }}
            
            {% if form.username.value %}
            <div class="username-display" style="margin-bottom: 1.5rem; padding: 12px; background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; text-align: left;">
                <label style="font-weight: 500; color: #333; font-size: 0.9rem; margin-bottom: 5px; display: block;">Username</label>
                <span style="color: #6c63ff; font-weight: 600;">{{ form.username.value }}</span>
            </div>
            {% endif %}
            
            <div class="form-grid">
                <div class="form-field">
                    <label for="{{ form.age.id_for_label }}">Age</label>
                    {{ form.age }}
                </div>

                <div class="form-field">
                    <label for="{{ form.gender.id_for_label }}">Gender</label>
                    {{ form.gender }}
                </div>

                <div class="form-field">
                    <label for="{{ form.employment_status.id_for_label }}">Employment Status</label>
                    {{ form.employment_status }}
                </div>

                <div class="form-field">
                    <label for="{{ form.education.id_for_label }}">Education Level</label>
                    {{ form.education }}
                </div>

                <div class="form-field form-field-full">
                    <label for="{{ form.occupation.id_for_label }}">Occupation</label>
                    {{ form.occupation }}
                </div>

                <div class="form-field">
                    <label for="{{ form.household_size.id_for_label }}">Household Size</label>
                    {{ form.household_size }}
                </div>

                <div class="form-field">
                    <label for="{{ form.monthly_income_sgd.id_for_label }}">Monthly Income (SGD)</label>
                    {{ form.monthly_income_sgd }}
                </div>

                <div class="form-field form-field-full">
                    <label for="{{ form.number_of_children.id_for_label }}">Number of Children</label>
                    {{ form.number_of_children }}
                </div>
            </div>

            {% if form.errors %}
                <div class="error-list">
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}
                            <p class="error-message">{{ error }}</p>
                        {% endfor %}
                    {% endfor %}
                </div>
            {% endif %}

            <button id="submit-btn" type="submit" class="submit-btn">
                <span class="arrow"><i class="fas fa-arrow-right" style="margin-right: 8px;"></i></span>
                <span class="button-text">
                    {% if is_profile_update %}Update Profile{% else %}Complete Setup{% endif %}
                </span>
                <span class="spinner" style="display: none;"></span>
            </button>
            
            {% if not is_profile_update %}
            <button type="submit" name="action" value="skip" formnovalidate class="skip-btn">
                <span class="skip-text">Skip for now</span>
            </button>
            {% endif %}
        </form>

        <div style="margin-top: 1.5rem; font-size: 0.85rem; color: #888;">
            <i class="fas fa-shield-alt" style="margin-right: 5px;"></i>
            {% if is_profile_update %}
                Your updated information will help us provide better recommendations.
            {% else %}
                Your information is secure and will only be used to improve your shopping experience.
            {% endif %}
        </div>
    </main>
</body>

</html>
