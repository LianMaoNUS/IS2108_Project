<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - AuroraMart</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'customer_website/css/login_signup.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

    <main class="login-container">
        <div class="logo-header">
            {% load static %}
            <img src="{% static 'customer_website/Logo.png' %}" alt="AuroraMart Logo" class="logo-img">
            <h2>Forgot Password</h2>
        </div>
        
        <p style="margin-bottom: 1.5rem; color: #555;">
            {% if show_email %}
                Enter your email address to receive a password reset link.
            {% else %}
                Enter your username to receive a password reset link via email.
            {% endif %}
        </p>
        
        <form id="forgot-password-form" class="login-form" method="post">
            {% csrf_token %}

            {% if show_email %}
                <input type="hidden" name="username" value="{{ username }}">
                {{ form.email }}
            {% else %}
                {{ form.username }}
            {% endif %}

            {% if success_message %}
            <div class="error-list" style="color: green; font-size: medium; margin-bottom: 1rem;">
                <p>{{ success_message }}</p>
            </div>
            {% endif %}

            {% if error_message %}
            <div class="error-list" style="color: red; font-size: medium;">
                <p>{{ error_message.0 }}</p>
            </div>
            {% endif %}

            <button id="forgot-button" type="submit">
                <span class="button-text">
                    {% if show_email %}
                        Send Reset Link
                    {% else %}
                        Verify Username
                    {% endif %}
                </span>
                <span class="spinner" style="display: none;"></span>
            </button>
        </form>
        
        <div style="margin-top: 1.5rem;">
            <a href="{% url 'login' %}" style="color: #6c63ff; text-decoration: none;">Back to Login</a>
        </div>

    </main>

    <script>
        document.getElementById('forgot-password-form').addEventListener('submit', function() {
            const button = document.getElementById('forgot-button');
            const buttonText = button.querySelector('.button-text');
            const spinner = button.querySelector('.spinner');
            
            buttonText.style.display = 'none';
            spinner.style.display = 'inline-block';
            button.disabled = true;
        });
    </script>

</body>

</html>
